---
description: >-
  ERC-4337是无需更改任何共识层即可在协议上实现账户抽象的以太坊标准。ERC-4337于2023年3月部署到以太坊主网，可实现在单个合约账户中进行交易和创建合约。这为设计用户友好型加密货币钱包打开了方便之门，进而促进并扩大钱包的应用范围。
---

# 什么是ERC-4337，即以太坊账户抽象？

## **导语**

以太坊改进提案(EIP)规定了以太坊平台的核心协议规范标准和合约标准等。以太坊注释请求(ERC)是一种以太坊改进提案，设定合约和代币标准等应用级标准。只有在链上治理授权更改后，以太坊改进提案(EIP)才能成为以太坊注释请求(ERC)。

ERC-4337是部署在以太坊主网上最新的ERC标准，以实现以太坊账户抽象这一期盼已久的目标。有人仍用原有术语EIP-4337来指代ERC-4337。然而，EIP-4337最早于2021年提出，并于2023年授权成为ERC-4337。

## **什么是ERC-4337**

ERC-4337由以太坊联合创始人Vitalik Buterin和其他开发人员于2021年提出，旨在建立账户抽象。2023年3月，ERC-4337部署到以太坊主网，预示着即将可以设计出易于使用的加密货币钱包。

以太坊账户抽象旨在将协议现有两类账户（即外部拥有账户(EOA)和智能合约账户）的功能合二为一。最终要实现的目标是单一合约账户与代币交易并同时创建合约。这一变化使创新型钱包设计成为可能，如社交恢复、定制和可升级性等。

换个角度看，ERC-4337为单一账户中的钱包带来了智能合约功能。这样一来，多重身份验证和自动支付等服务将更易于设置。

## **为何需要ERC-4337**

要了解为何需要ERC-4337，首先必须了解为何要提出和实施ERC-4337。与比特币网络的未花费交易输出(UTXO)模块不同，以太坊协议使用基于账户的模式。也就是说，以太坊协议会在交易确认时追踪并更新账户的可用余额。

以太坊中的两种账户各自具有不同的功能。外部拥有账户由用户拥有和控制，而智能合约账户是部署到网络中的智能合约。两种账户均可接收、持有和发送以太币或代币。

以太坊中现有的大多数加密货币钱包均为外部拥有钱包，如MetaMask等。这些钱包都受限于外部拥有钱包的设定规则。受限条件包括账户访问完全依靠私钥，且所有交易均需签名。因此，钱包设置程序和私钥安全措施通常十分复杂，且不便于用户使用。如果用户丢失助记词，就意味着无法再访问钱包。

ERC-4337消除了此类限制。由智能合约账户而非外部拥有账户管理的智能合约钱包，例如UniPass和Safe等，可以达到同样的目的。但是，用户必须在两个账户中管理以太币，用于支付燃料费或依靠中心化中继系统。ERC-4337将两个账户的功能合二为一，便于所需钱包功能进行部署，从而消除了此类限制。

## **ERC-4337如何运作**

以太坊社区长期以来一直在研究实现账户抽象的方式。在EIP-4337之前，社区提出过另一个旨在实现账户抽象的提案，称为“EIP-2938”。EIP-2938与ERC-4337类似，但需要更改共识层，ERC-4337则规避了这一点。

ERC-4337通过引入称为“UserOperation”的更高层伪交易对象来实现账户抽象。UserOperation与汇总具有相似之处，二者均涉及到不同版本的捆绑概念。在ERC-4337中，不同的用户将UserOperation对象发送到单独的内存池中。

捆绑者(Bundler)将这些对象打包成一笔交易，纳入到一个区块当中。捆绑者支付捆绑交易的燃料费，但收取单独执行UserOperation的费用。捆绑者与验证者的工作方式类似，即根据费用优先等级逻辑选择要纳入的对象。

钱包添加了包括validateUserOp在内的新功能，从而还可用作智能合约。名为“EntryPoint”的新合约也引入其中，充当执行这些新功能的安全门。

## **ERC-4337要达成哪些目标**

ERC-4337旨在达成以下目标：

**账户抽象：**&#x7528;户可以享用同时具备智能合约和外部拥有账户功能的单一账户。

**去中心化：**&#x4EFB;意捆绑者均可参与到流程当中。

**避免共识更改：**&#x4EE5;太坊共识层侧重于针对可扩展性的升级，因此能加快应用普及速度。

**启用创新用例：**&#x5305;括聚合签名、每日交易限额设置、账户紧急冻结、白名单设置以及保护隐私的应用程序等。

**省时并节省燃料费：**&#x6346;绑者能将UserOperation对象打包到一笔交易中，因此能节省时间和燃料费。

## **ERC-4337对用户有何意义**

ERC-4337会让加密货币钱包的复杂操作体验成为过去式，并提高钱包使用的普及率。以下是ERC-4337可以实现的一些亮点：

**钱包设置：**&#x65E0;需写下助记词。只需轻点几下，即可快捷轻松地进行设置。

**无忧账户恢复：**&#x7528;户无需再担心丢失助记词，现已可以实现多重身份验证和账户恢复。

**易于使用的钱包功能：**&#x7528;户可以享用丰富的定制服务，包括自动支付、预先批准交易和捆绑交易。只有用户想不到，没有ERC-4337做不到。

**更高的安全性：**&#x4EBA;为出错的几率降低，钱包将会更加安全。不用再小心翼翼地藏匿助记词！从理论上讲，ERC-4337能为用户带来更流畅友好的体验，为大规模应用普及扫清主要障碍。

**更灵活的燃料费支付方式：**&#x7531;ERC-4337提供支持的钱包现在可用任意ERC-20代币和其他币种支付燃料费。开发人员可以创建用任意代币甚至法币支付燃料费的钱包。

## **结语**

助记词、私钥和公钥等加密货币钱包术语会让新用户望而生畏。使用加密货币钱包的流程对有些人而言仍是困难重重。许多人一致认为，普通用户的使用界面需要尽量简化，才能提高加密货币的普及率。

ERC-4337奠定了支持创新型加密货币钱包的技术基础。开发人员在此基础上构建的应用可能会改变加密货币与用户之间的主要触点。无论如何，让我们拭目以待ERC-4337在未来几年会对用户体验和加密货币整个行业带来怎样的影响。



如有不明白或者不清楚的地方，请加入官方电报群：[https://t.me/gtokentool](https://t.me/gtokentool)
